{
  "name": "fdm_idex",
  "type": "machine",
  "from": "system",
  "inherits": "fdm_common",
  "instantiation": "false",
  "single_extruder_multi_material": "0",
  "extruder_clearance_radius": "68",
  "extruder_clearance_height_to_rod": "36",
  "extruder_clearance_height_to_lid": "90",
  "thumbnails": [
    "350x350"
  ],
  "printable_area": [
    "0x0",
    "324x0",
    "324x200",
    "0x200"
  ],
  "bed_exclude_area": [
    "312x0",
    "324x0",
    "324x200",
    "312x200"
  ],
  "printable_height": "200",
  "nozzle_diameter": [
    "0.4",
    "0.4"
  ],
  "extruder_offset": [
    "0x0",
    "0x0"
  ],
  "fan_speedup_time": [
    "0.3"
  ],
  "fan_speedup_overhangs": [
    "1"
  ],
  "retract_length_toolchange": [
    "2",
    "2"
  ],
  "machine_max_speed_x": [
    "350"
  ],
  "machine_max_speed_y": [
    "350"
  ],
  "machine_max_speed_z": [
    "10"
  ],
  "machine_max_speed_e": [
    "40"
  ],
  "machine_max_jerk_x": [
    "9"
  ],
  "machine_max_jerk_y": [
    "9"
  ],
  "machine_max_jerk_z": [
    "2.5"
  ],
  "machine_max_jerk_e": [
    "3"
  ],
  "machine_max_acceleration_extruding": [
    "12000"
  ],
  "machine_max_acceleration_retracting": [
    "5000"
  ],
  "machine_max_acceleration_travel": [
    "12000"
  ],
  "machine_max_acceleration_x": [
    "12000"
  ],
  "machine_max_acceleration_y": [
    "12000"
  ],
  "machine_max_acceleration_z": [
    "500"
  ],
  "machine_max_acceleration_e": [
    "5000"
  ],
  "before_layer_change_gcode": "; Before Layer Change >>>\nG92 E0\n; layer #[layer_num]\n",
  "change_filament_gcode": ";***** Update: 20230730\n{if current_extruder != next_extruder}\n; Change T[current_extruder] -> T[next_extruder] (layer [layer_num] #[toolchange_count]/[total_toolchanges])\n; layer #[layer_num] at [layer_z]mm\nT{next_extruder}\n\nM107 P[current_extruder] ;fan off T[current_extruder]\nM104 T[current_extruder] S{temperature_vitrification[current_extruder]} ;standby T[current_extruder]\n\n{if layer_num == 1 &&\n ((filament_type[current_extruder] == \"PLA\" || filament_type[current_extruder] == \"TPU\")\n  || (filament_type[next_extruder] == \"PLA\" || filament_type[next_extruder] == \"TPU\"))\n}\n; set bed temp: {filament_type[current_extruder]}({bed_temperature[current_extruder]}) -> {filament_type[next_extruder]}({bed_temperature[next_extruder]})\nM140 S{min(bed_temperature[current_extruder], bed_temperature[next_extruder])}\n{endif}\n\nM2000 S200 V[travel_speed] A[travel_acceleration] ;quick switch extruders, S:200 mode/V:speed/A:acceleration\nM109 T[next_extruder] S{if layer_num < 1}[nozzle_temperature_initial_layer]{else}[nozzle_temperature]{endif} C3 W1 ;wait T[next_extruder]\n{if layer_z > first_layer_height && layer_num >= close_fan_the_first_x_layers[next_extruder]}\n  M106 P[next_extruder] S{fan_min_speed[next_extruder] * 255.0 / 100.0} ;restore fan speed for T[next_extruder]\n{endif}\n\n{endif}\n",
  "template_custom_gcode": "; custom gcode\nM104 S0 T0 ;turn off T0\nM106 S0 P0 ;turn off fan\n",
  "layer_change_gcode": "",
  "machine_pause_gcode": "M600 ;pause print",
  "machine_start_gcode": ";***** Update  : 20230731\n;***** Printer : [printer_preset]\n;***** Profile : [print_preset]\n;***** Plate   : [plate_name]\n; ----- initial_extruder: [initial_extruder]\n; ----- has_wipe_tower: [has_wipe_tower]\n; ----- total_toolchanges: [total_toolchanges]\n; ----- T0: {is_extruder_used[0]}\n; ----- T1: {is_extruder_used[1]}\n\nM205 V5 ;Junction Deviation (mm)\n\n{if plate_name =~/.*IDEXDupl.*/ || plate_name =~/.*IDEXCopy.*/ }\n  M605 S2 X162 R0 ;IDEX Duplication\n{elsif plate_name =~/.*IDEXMirr.*/}\n  M605 S3 ;IDEX Mirror\n{elsif plate_name =~/.*IDEXBack.*/}\n  M605 S4 ;IDEX Backup\n{endif}\n\nM82 ;absolute extrusion mode\nM140 S[first_layer_bed_temperature] ;start warming bed\n\n; pre-heat extruders\n{if is_extruder_used[0]}M104 T0 S{temperature_vitrification[0]} ;preheat T0{endif}\n{if is_extruder_used[1]}M104 T1 S{temperature_vitrification[1]} ;preheat T1{endif}\n\nG28           ;home all axes\nG1 Z10.0 F350 ;z raise\n\n; wait for bed temperature\nM190 S[first_layer_bed_temperature]\n\n; set first layer temp\n{if is_extruder_used[0]}M104 T0 S{nozzle_temperature_initial_layer[0]}{endif}\n{if is_extruder_used[1]}M104 T1 S{nozzle_temperature_initial_layer[1]}{endif}\n\n{if 1==1}; LED\n  M355 S1 P64\n  G4 P100\n  M355 S1 P128\n  G4 P100\n  M355 S1 P64\n  G4 P200\n  M355 S1 P255\n  G4 P100\n{endif}\n\nG1 Z0.8 F500\n\n{if is_extruder_used[0] and initial_extruder != 0}\n; purge left extruder\nM109 T0 S{nozzle_temperature_initial_layer[0]} C3 W1 ;wait T0\nT0\nG92 E0\nG1 X{if 0 == 0}0{else}320{endif} Y-0.5 Z0.5 F6000 ;move to unsed front edge\nG1 E{retraction_length[0] * 1.5} F1800 ;deretract\nG1 X{if 0 == 0}80{else}240{endif} E16 F1200 ;deposit extrusion line\nG1 Z1 F6000 ;lift\nG92 E0\nG1 X{if 0 == 0}-13{else}338{endif} F6000\nM104 T0 S{temperature_vitrification[0]} ;standby T0\nM107 P0 ;fan off\n{endif}\n\n{if is_extruder_used[1] and initial_extruder != 1}\n; purge right extruder\nM109 T1 S{nozzle_temperature_initial_layer[1]} C3 W1 ;wait T1\nT1\nG92 E0\nG1 X{if 1 == 0}0{else}320{endif} Y-0.5 Z0.5 F6000 ;move to unsed front edge\nG1 E{retraction_length[1] * 1.5} F1800 ;deretract\nG1 X{if 1 == 0}80{else}240{endif} E16 F1200 ;deposit extrusion line\nG1 Z1 F6000 ;lift\nG92 E0\nG1 X{if 1 == 0}-13{else}338{endif} F6000\nM104 T1 S{temperature_vitrification[1]} ;standby T1\nM107 P1 ;fan off\n{endif}\n\n; purge initial extruder\nM109 T[initial_extruder] S{nozzle_temperature_initial_layer[initial_extruder]} C3 W1 ;wait T[initial_extruder]\nT[initial_extruder]\nG92 E0\nG1 X{if initial_extruder == 0}0{else}320{endif} Y-0.5 Z0.5 F6000 ;move to unsed front edge\nG1 E{retraction_length[initial_extruder] * 1.5} F1800 ;deretract\nG1 X{if initial_extruder == 0}80{else}240{endif} E16 F1200 ;deposit extrusion line\nG1 Z1 F6000 ;lift\nG92 E0\n;===== ready\n",
  "machine_end_gcode": "; End G-code >>>\n;***** Update : 20230723\n{if max_layer_z < printable_height}G1 Z{min(max_layer_z + 0.5, printable_height)} F600 ;lift z a little{endif}\n\n; turn off extruders\n{if is_extruder_used[0]}M104 T0 S0{endif}\n{if is_extruder_used[1]}M104 T1 S0{endif}\n\nM140 S0 ;turn off bed\nM107 ;turn off fan\nM221 S100 ;reset flow\n\nG28 ;home\nM84 ;disable motors\n; <<< End G-code\n;\n; DON'T REMOVE these lines if you're using the smfix (https://github.com/macdylan/SMFix)\n; min_x = [first_layer_print_min_0]\n; min_y = [first_layer_print_min_1]\n; max_x = [first_layer_print_max_0]\n; max_y = [first_layer_print_max_1]\n; max_z = [max_layer_z]\n;\n"
}